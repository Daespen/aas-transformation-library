{
  "@header": {
    "aasVersion": "3.0RC01",
    "@namespaces": {
      "ns1": "http://ns.org/1",
      "ns2": "http://ns.org/2",
      "caex": "http://www.dke.de/CAEX"
    },
    "@definitions": {
      "assetIdGeneration": {
        "@concatenate_and_hash": [
          {
            "@xpath": "caex:Attribute[@Name='IdentificationData']/caex:Attribute[@Name='Manufacturer']/caex:Value",
            "default": "DefaultManufacturer"
          },
          "/",
          {
            "@xpath": "caex:Attribute[@Name='IdentificationData']/caex:Attribute[@Name='ManufacturerUri']/caex:Value"
          }
        ]
      },
      "mappingIdGeneration": {
        "concatenate_and_hash": [
          {
            "@xpath": "caex:Attribute[@Name='IdentificationData']/caex:Attribute[@Name='Manufacturer']/caex:Value",
            "@const": "DefaultManufacturer"
          },
          {
            "@const": "/"
          },
          {
            "@xpath": "caex:Attribute[@Name='IdentificationData']/caex:Attribute[@Name='ManufacturerUri']/caex:Value"
          }
        ]
      }
    },
    "@variables": {
      "submodel3Id": {
        "@xpath": "submodel3"
      },
      "submodelDocsId": "submodelDocuments"
    },
    "@parameters": {}
  },
  "assetAdministrationShellEnvironment": {
    "assets": [
      {
        "identification": {
          "keys": [
            {
              "@bind": {
                "id": {
                  "@concatenate": [
                    {
                      "@const": "shellId"
                    }
                  ]
                },
                "idType": "Iri"
              }
            }
          ],
          "idShort": {
            "@xpath": "@Name"
          }
        }
      }
    ],
    "assetAdministrationShells": [
      {
        "@foreach": {
          "@xpath:": "//caex:SystemUnitClass[caex:SupportedRoleClass/@RefRoleClassPath='AutomationMLComponentStandardRCL/AutomationComponent' or caex:RoleRequirements/@RefBaseRoleClassPath='AutomationMLComponentStandardRCL/AutomationComponent'] | //caex:InternalElement[caex:SupportedRoleClass/@RefRoleClassPath='AutomationMLComponentStandardRCL/AutomationComponent' or caex:RoleRequirements/@RefBaseRoleClassPath='AutomationMLComponentStandardRCL/AutomationComponent']"
        },
        "@bind": {
          "idShort": {
            "@xpath": "@Name"
          }
        },
        "identification": {
          "keys": [
            {
              "@bind": {
                "id": {
                  "@def": "mappingIdGeneration"
                }
              },
              "idType": "Iri"
            }
          ]
        },
        "assetInformation": {
          "@bind": {
            "kindType": {
              "@xpath": "'TYPE'"
            }
          },
          "globalAssetId": {
            "valueId": "assetInformationGlobalAssetIdReference",
            "keyType": "CUSTOM",
            "keyElement": "ASSET"
          }
        },
        "submodels": []
      }
    ],
    "submodels": [
      {
        "@foreach": {
          "@caexAttributeName": "IdentificationData"
        },
        "semanticId": {
          "keys": [
            {
              "idType": "Iri",
              "type": "Submodel",
              "value": "http://sap.com"
            }
          ]
        },
        "@variables": {
          "submodel3Id": {
            "@xpath": "this is an updated Variable"
          }
        },
        "identification": {
          "keys": [
            {
              "@bind": {
                "id": {
                  "@concatenate": [
                    {
                      "@def": "assetIdGeneration"
                    },
                    {
                      "@const": "_submodel1"
                    },
                    {
                      "@var": "submodel3Id"
                    }
                  ]
                }
              },
              "idType": "Iri"
            }
          ]
        },
        "idShort": "submodelShortId1",
        "submodelElements": [
          {
            "@foreach": {
              "@caexAttributeName": "Manufacturer"
            },
            "semanticId": {
              "keys": [
                {
                  "idType": "IdShort",
                  "type": "ReferenceElement",
                  "value": "submodelElementSemanticId1"
                }
              ]
            },
            "modelType": {
              "name": "Property"
            },
            "valueType": "STRING"
          },
          {
            "@foreach": {
              "@xpath": "caex:Attribute[@Name='Manufacturer']"
            },
            "semanticId": {
              "keys": [
                {
                  "idType": "IdShort",
                  "type": "ReferenceElement",
                  "value": "submodelElementSemanticId2"
                }
              ]
            },
            "modelType": {
              "name": "Property"
            },
            "valueType": "STRING",
            "@bind": {
              "value": {
                "@xpath": "caex:Value"
              }
            }
          },
          {
            "@foreach": {
              "@xpath": "caex:Attribute[@Name='ManufacturerURI']"
            },
            "modelType": {
              "name": "Capability"
            },
            "@bind": {
              "idShort": {
                "@xpath": "'Browseable'"
              }
            }
          }
        ]
      },
      {
        "@foreach": {
          "@xpath": "caex:Attribute[@Name='CommercialData']"
        },
        "semanticId": {
          "keys": [
            {
              "idType": "Iri",
              "type": "Submodel",
              "value": "http://sap.com"
            }
          ]
        },
        "identification": {
          "keys": [
            {
              "@bind": {
                "id": {
                  "@concatenate": [
                    {
                      "@const": "submodel2_"
                    },
                    {
                      "@def": "assetIdGeneration"
                    }
                  ]
                }
              },
              "idType": "Iri"
            }
          ]
        },
        "submodelElements": [
          {
            "@foreach": {
              "@caexAttributeName": "ProductPriceDetails"
            },
            "modelType": {
              "name": "SubmodelElementCollection"
            },
            "semanticId": {
              "keys": [
                {
                  "idType": "idShort",
                  "type": "Submodel",
                  "value": "SubmodelElementCollectionSemanticId"
                }
              ]
            },
            "submodelElements": [
              {
                "@foreach": {
                  "@caexAttributeName": "ValidStartDate"
                },
                "modelType": {
                  "name": "Property"
                },
                "valueType": "STRING"
              },
              {
                "@foreach": {
                  "@xpath": "caex:Attribute[@Name='ProductPrice']/caex:Attribute[@Name='PriceAmount']"
                },
                "modelType": {
                  "name": "Property"
                },
                "valueType": "STRING"
              }
            ]
          },
          {
            "@foreach": {
              "@caexAttributeName": "ProductDetails"
            },
            "modelType": {
              "name": "SubmodelElementCollection"
            },
            "semanticId": {
              "valueId": "ProductDetails",
              "keyType": "CUSTOM",
              "keyElement": "CONCEPT_DESCRIPTION"
            },
            "submodelElements": [
              {
                "@foreach": {
                  "@caexAttributeName": "DescriptionShort"
                },
                "modelType": {
                  "name": "MultiLanguageProperty"
                },
                "values": {
                  "@bind": {
                    "lang": {
                      "@xpath": "'en'"
                    },
                    "value": {
                      "@xpath": "caex:Value"
                    }
                  }
                }
              }
            ]
          },
          {
            "@foreach": {
              "@caexAttributeName": "PackagingAndTransportation"
            },
            "modelType": {
              "name": "Entity"
            },
            "semanticId": {
              "value": "PackAndTransport",
              "keyType": "IdShort",
              "keyElement": "PROPERTY"
            },
            "entityType": "SELF_MANAGED_ENTITY",
            "globalAssetId": {
              "keys": [
                {
                  "value": "AssetIdExtern",
                  "keyElement": "ASSET",
                  "idType": "IdShort"
                }
              ]
            },
            "statements": [
              {
                "@foreach": {
                  "@caexAttributeName": "GTIN"
                },
                "modelType": {
                  "name": "Property"
                },
                "valueType": "STRING"
              },
              {
                "@foreach": {
                  "@caexAttributeName": "CustomsTariffNumber"
                },
                "modelType": {
                  "name": "Property"
                },
                "valueType": "integer"
              },
              {
                "@foreach": {
                  "@caexAttributeName": "CountryOfOrigin"
                },
                "modelType": {
                  "name": "Property"
                },
                "valueType": "STRING"
              }
            ]
          }
        ]
      },
      {
        "@foreach": {
          "@xpath": "caex:Attribute[@Name='GeneralTechnicalData']"
        },
        "semanticId": {
          "keys": [
            {
              "idType": "Iri",
              "type": "Submodel",
              "value": "http://sap.com"
            }
          ]
        },
        "identification": {
          "keys": [
            {
              "@bind": {
                "id": {
                  "@concatenate": [
                    {
                      "@def": "assetIdGeneration"
                    },
                    "_generalTechnicalData"
                  ]
                }
              },
              "idTYpe": "Iri"
            }
          ]
        },
        "submodelElements": [
          {
            "@foreach": {
              "@caexAttributeName": "AmbientTemperature"
            },
            "modelType": "Range",
            "semanticId": {
              "valueId": "AmbientTemperature",
              "keyType": "IRI",
              "keyElement": "RANGE"
            },
            "valueType": "Integer",
            "@bind": {
              "minValue": {
                "@xpath": "caex:Attribute[@Name='TemperatureMin']/caex:Value"
              },
              "maxValue": {
                "@xpath": "caex:Attribute[@Name='TemperatureMax']/caex:Value"
              }
            }
          },
          {
            "@foreach": {
              "@caexAttributeName": "Material"
            },
            "modelType": {
              "name": "MultiLanguageProperty"
            }
          }
        ]
      },
      {
        "@foreach": {
          "@caexAttributeName": "ParameterData"
        },
        "semanticId": {
          "keys": [
            {
              "idType": "Iri",
              "type": "Submodel",
              "value": "http://sap.com"
            }
          ]
        },
        "identification": {
          "keys": [
            {
              "@bind": {
                "id": {
                  "@var": "$submodel3Id"
                }
              },
              "idType": "IdShort"
            }
          ]
        },
        "submodelElements": [
          {
            "@foreach": {
              "@xpath": "caex:Attribute"
            },
            "modelType": {
              "name": "Property"
            },
            "valueType": "STRING"
          }
        ]
      },
      {
        "@foreach": {
          "@xpath": "."
        },
        "semanticId": {
          "keys": [
            {
              "idType": "Iri",
              "type": "Submodel",
              "value": "http://sap.com/Documents"
            }
          ]
        },
        "idShort": "Documents",
        "identification": {
          "keys": [
            {
              "@bind": {
                "id": {
                  "@vars": "submodelDocsId"
                }
              },
              "idType": "idShort"
            }
          ]
        },
        "submodelElements": [
          {
            "@foreach": {
              "@xpath": "caex:InternalElement[@Name='Manuals']/caex:InternalElement[@Name='Betriebsanleitung']/caex:ExternalInterface[@Name='ExternalDataReference']"
            },
            "modelType": {
              "name": "File"
            },
            "@bind": {
              "idShort": {
                "@xpath": "'Betriebsanleitung'"
              },
              "value": {
                "@xpath": "caex:Attribute[@Name='refURI']/caex:Value"
              },
              "mimeType": {
                "@xpath": "caex:Attribute[@Name='MIMEType']/caex:Value"
              }
            }
          },
          {
            "@foreach": {
              "@xpath": "caex:InternalElement[@Name='STEPGeometry']/caex:ExternalInterface[@Name='ExternalDataReference']"
            },
            "modelType": {
              "name": "ReferenceElement"
            },
            "@bind": {
              "idShort": {
                "@xpath": "'STEPGeometry'"
              }
            },
            "value": {
              "keys": [
                {
                  "@bind": {
                    "id": {
                      "@xpath": "caex:Attribute[@Name='refURI']/caex:Value"
                    }
                  },
                  "keyElement": {
                    "@const": "CONCEPT_DESCRIPTION"
                  }
                }
              ]
            }
          },
          {
            "@foreach": {
              "@xpath": "caex:InternalElement[@Name='ManualsBIN']/caex:InternalElement[@Name='BetriebsanleitungBIN']/caex:ExternalInterface[@Name='ExternalDataReference']"
            },
            "modelType": {
              "modelType": "Blob"
            },
            "@bind": {
              "idShort": {
                "@xpath": "'BetriebsanleitungBIN'"
              },
              "value": {
                "@xpath": "caex:Attribute[@Name='refURI']/caex:Value"
              },
              "mimeType": {
                "@xpath": "caex:Attribute[@Name='MIMEType']/caex:Value"
              }
            }
          },
          {
            "@foreach": {
              "@xpath": "caex:InternalElement[@Name='ManualsBasicEvent']/caex:InternalElement[@Name='SampleBasicEvent']/caex:ExternalInterface[@Name='ExternalDataReference']"
            },
            "modelType": {
              "name": "BasicEvent"
            },
            "@bind": {
              "idShort": {
                "@xpath": "'SampleBasicEvent'"
              },
              "observed": {
                "id": {
                  "@xpath": "caex:Attribute[@Name='refURI']/caex:Value"
                }
              }
            }
          }
        ]
      },
      {
        "@foreach": {
          "@xpath": "."
        },
        "@bind": {
          "idShort": {
            "@xpath": "'Operations'"
          }
        },
        "id": {
          "keys": [
            {
              "@bind": {
                "id": {
                  "@concatenate": [
                    {
                      "@def": "assetIdGeneration"
                    },
                    "_operations"
                  ]
                }
              },
              "keyType": "Iri"
            }
          ]
        },
        "semanticId": {
          "keys": [
            {
              "idType": "Iri",
              "type": "Submodel",
              "value": "http://sap.com/operations"
            }
          ]
        },
        "submodelElements": [
          {
            "@foreach": {
              "@caexAttributeName": "OperationA"
            },
            "semanticId": {
              "keys": [
                {
                  "idType": "IdShort",
                  "type": "Submodel",
                  "value": "ops"
                }
              ],
              "modelType": {
                "name": "Operation"
              }
            },
            "inputVariables": [
              {
                "@foreach": {
                  "@xpath": "caex:Attribute[@Name='Inputs']/caex:Attribute"
                },
                "modelType": {
                  "modelType": "Property"
                },
                "valueType": "STRING"
              }
            ],
            "outputVariables": [
              {
                "@foreach": {
                  "@xpath": "caex:Attribute[@Name='Outputs']/caex:Attribute"
                },
                "modelType": {
                  "name": "Property"
                },
                "valueType": "STRING"
              }
            ],
            "inOutputVariables": [
              {
                "@foreach": {
                  "@xpath": "caex:Attribute[@Name='InOut']/caex:Attribute"
                },
                "modelType": {
                  "name": "Property"
                },
                "valueType": "STRING"
              }
            ]
          },
          {
            "@foreach": {
              "@caexAttributeName": "OperationA"
            },
            "semanticId": {
              "keys": [
                {
                  "idType": "IdShort",
                  "type": "Submodel",
                  "value": "test"
                }
              ]
            },
            "modelType": {
              "name": "RelationshipElement"
            },
            "idShort": "relElement",
            "first": {
              "keys": [
                {
                  "valueId": "FOO",
                  "keyType": "IRI",
                  "keyElement": "CONCEPT_DESCRIPTION"
                }
              ]
            },
            "second": {
              "keys": [
                {
                  "valueId": "BAR",
                  "keyType": "IRI",
                  "keyElement": "CONCEPT_DESCRIPTION"
                }
              ]
            }
          },
          {
            "@foreach": {
              "@caexAttributeName": "OperationA"
            },
            "semanticId": {
              "keys": [
                {
                  "idType": "FragmentId",
                  "type": "Submodel",
                  "value": "test/test/test"
                }
              ]
            },
            "modelType": {
              "name": "AnnotatedRelationshipElement"
            },
            "@bind": {
              "idShort": {
                "@xpath": "'annoRelElement'"
              }
            },
            "first": {
              "keys": [
                {
                  "value": "abc",
                  "type": "CONCEPT_DESCRIPTION",
                  "idType": "IdShort"
                }
              ]
            },
            "second": {
              "keys": [
                {
                  "value": "def",
                  "type": "CONCEPT_DESCRIPTION",
                  "idType": "IdShort"
                }
              ]
            },
            "annotations": [
              {
                "@foreach": {
                  "@xpath": "caex:Attribute[@Name='Inputs']/caex:Attribute"
                },
                "modelType": {
                  "name": "Property"
                },
                "valueType": "STRING"
              },
              {
                "@foreach": {
                  "@xpath": "caex:Attribute[@Name='Outputs']/caex:Attribute"
                },
                "modelType": {
                  "name": "Property"
                },
                "valueType": "STRING"
              }
            ]
          },
          {
            "@foreach": {
              "@xpath": "caex:Attribute[@Name='Manufacturer']"
            },
            "semanticId": {
              "keys": [
                {
                  "idType": "IdShort",
                  "type": "Submodel",
                  "value": "submodelElementSemanticId2"
                }
              ]
            },
            "valueType": "STRING",
            "modelType": {
              "modelType": "Property"
            },
            "@bind": {
              "value": {
                "@xpath": "caex:Value"
              }
            }
          },
          {
            "@foreach": {
              "@xpath": "caex:Attribute[@Name='ManufacturerURI']"
            },
            "@bind": {
              "@xpath": "'Browseable'"
            },
            "modelType": {
              "modelType": "Capability"
            }
          }
        ]
      }
    ],
    "conceptDescriptions": [
    ]
  }
}
